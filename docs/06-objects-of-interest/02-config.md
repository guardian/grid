# Config

The Grid has different config files depending on the service and usage e.g. the Guardian or BBC-specific features.
[`GridConfigLoader.scala`](https://github.com/guardian/grid/blob/main/common-lib/src/main/scala/com/gu/mediaservice/lib/config/GridConfigLoader.scala) loads the configs, which get parsed and turned into a tree of config by a function in this library (https://github.com/lightbend/config) which will recursively merge the trees.

#### [`application.conf`](https://github.com/guardian/grid/blob/3fb1d936f82a0cd02a2a3c4293b680f7f8f5caf5/common-lib/src/main/resources/application.conf)

The file lists configs that every user and service should have. This file should provide good defaults for grid features where required. This file has the lowest priority and keys will be overridden if set in other files.

### Other config files

Other config files will be read from `$HOME/.grid/` (when running locally) or `/etc/grid` (when deployed, as determined by the contents of `/etc/grid/stage`).
For local development, files will be generated by the [generate-config script](/dev/script/generate-config). It is up to the implementor to determine how to load config files onto deployed instances - we at the Guardian currently fetch files from S3 in a [UserData script](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html).

This file will be packaged by sbt-native-packager, available once installed on the destination instance and automatically loaded by Play.

> **Note**
> Currently this is the only file that is loaded at Play's first initialisation. Some play settings will only take effect if set in this file.

#### `<configRoot>/<stage>/common.conf`
Anything that's specific to an organisation and to a stage, but is common across all the services. Keys set here will override those set in `application.conf` but be overridden by the service-specific configs.

#### `<configRoot>/<stage>/<service>.conf`
Service-specific configs. These will override all other config files.

[Documentation](https://docs.google.com/document/d/1CSERbLwbu6nT_ggzzYxdUt9IHpfGUJLIYPnU_9MZbpc/edit) on the existing Grid config options

## Config documentation

### Common configuration

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>auth.useLocal</code><br>If true, the AWS client will be configured to be localstack aware <br>Only used in The Guardian’s PermissionsAuthorisationProvider and PandaAuthenticationProvider</td>
    <td>True (not needed if using another authentication + authorisation providers)</td>
    <td>boolean</td>
    <td>false</td>
  </tr>
  <tr>
    <td><code>panda.userDomain</code><br>Used only in The Guardian’s PandaAuthenticationProvider</td>
    <td>True (not needed if using another authentication provider)</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>panda.bucketName</code><br>The AWS S3 bucket name that contains <br>Used only in The Guardian’s PandaAuthenticationProvider.</td>
    <td>True (not needed if using another authentication provider)</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>permissions.bucket</code><br>The AWS S3 bucket name used in The Guardian’s PermissionsProvider</td>
    <td>True (not needed if using another authorisation provider)</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>image.record.download</code><br>When true any downloads are recorded as usages and usage@platform:download filter appears in the UI.</td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>useReaper</code><br>Is reaper (image deletion service) supported?</td>
    <td>True</td>
    <td>boolean</td>
    <td></td>
  </tr>
  <tr>
    <td><code>restrictDownload</code><br>Restrict download of images to users with edit_metadata permission where that user is not the image uploader</td>
    <td>True</td>
    <td>boolean</td>
    <td>false</td>
  </tr>
  <tr>
    <td><code>announcements</code>
    <br>Notifications and announcements to be sent to users<br>Format:<br>[ (array)<br>{ (json object)<br><i>announceId</i>: (string) the unique id of the announcement - should be unique among all active announcements<br><i>description</i>: (string) the main text to display in the notification<br><i>endDate</i>: (string, optional, format="yyyy-mm-dd") the date beyond which the announcement should not be seen, if not present set as today + 1 year<br><i>url</i>: (string, optional) a link to a page/document providing further details regarding announcement<br><i>urlText</i>: (string, optional) text to be included in a-tag hyperlink (will revert to default if not present)<br><i>category</i>: (string) the type of announcement - will control styling and display, Enum=announcement; information; warning; error; success<br><i>lifespan</i>: (string) the lifecycle behaviour Enum=transient (message disappears on any click etc); session (message must be acknowledged but action NOT stored in client cookie - used for current session messages); persistent (message must be acknowledged and action stored in client cookie - used for long-running announcements)<br>},<br>...<br>]</td>
    <td>True</td>
    <td>Json Object Array</td>
    <td>[]</td>
  </tr>
</tbody>
</table>

#### Admin tools service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td>False</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td>url</td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td>False</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td>False</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td>False</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td>False</td>
    <td>string</td>
    <td></td>
  </tr>
</tbody>
</table>

### Auth Service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td>False</td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.config.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td>string</td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td>boolean</td>
    <td></td>
  </tr>
</tbody>
</table>

### Collections service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.collections.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.table.collections</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.table.imageCollections</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>

### Cropper Service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>publishing.image.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>publishing.image.host</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.config.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>

### Image Loader service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.image.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.thumb.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.quarantine.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.config.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.table.upload.status</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>transcoded.mime.types</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>upload.quarantine.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>

### Kahuna service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.image.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.thumb.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.quarantine.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.config.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.table.upload.status</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>transcoded.mime.types</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>upload.quarantine.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>showDenySyndicationWarning</code></td>
    <td>true</td>
    <td><code>boolean</code></td>
    <td>false</td>
  </tr>
  <tr>
    <td><code>warningText.denySyndicationHeader</code></td>
    <td>true</td>
    <td><code>string</code></td>
    <td>Syndication denied</td>
  </tr>
  <tr>
    <td><code>scriptsToLoad</code></td>
    <td>true</td>
    <td>
      <code>object[]</code><br/>
      with each object having properties <ul>
        <li><code>host</code></li>
        <li><code>path</code></li>
        <li><code>async</code></li> (optional)
        <li><code>permission</code></li> (optional)
        <li><code>shouldLoadWhenIFramed</code></li> (optional)
      </ul>
    </td>
    <td></td>
  </tr>
  <tr>
    <td>
      <code>security.frameAncestors</code><br/>
      Additional entries to be added to the <code>frame-ancestors</code> section of the <code>Content-Security-Policy</code>
    </td>
    <td>true</td>
    <td><code>string[]</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.connectSources</code><br/>
      Additional entries to be added to the <code>connect-src</code> section of the <code>Content-Security-Policy</code>
    </td>
    <td>true</td>
    <td><code>string[]</code></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.fontSources</code><br/>
      Additional entries to be added to the <code>font-src</code> section of the <code>Content-Security-Policy</code>
    </td>
    <td>true</td>
    <td><code>string[]</code></td>
    <td></td>
  </tr>
</tbody>
</table>

### Leases service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.tablename.leasesTable</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>

### Media API service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.image.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.thumb.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.config.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.usagemail.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>persistence.identifier</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es6.url</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es6.shards</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es6.replicas</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>quota.store.key</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>

### Metadata editor service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.collections.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.table.edits</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.globalsecondaryindex.edits.photoshoots</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.table.syndication</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>indexed.images.sqs.queue.url</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>

### S3 watcher

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>loader.uri</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>auth.key.s3watcher</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.ingest.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.fail.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>

### Thrall service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.image.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>s3.thumb.bucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>persistence.identifier</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>indexed.image.sns.topic.arn</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es6.url</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es6.shard</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es6.replicas</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.projection.parallelism</code></td>
    <td>yes</td>
    <td>int</td>
    <td>1</td>
  </tr>
</tbody>
</table>

### Usage service

<table>
<thead>
  <tr>
    <th>Key</th>
    <th>Optional</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><code>domain.root</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>authentication.providers.machine.config.authKeyStoreBucket</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.local.endpoint</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.stream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>thrall.kinesis.lowPriorityStream.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.current</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>es.index.aliases.migration</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>aws.region</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>capi.live.url</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>capi.apiKey</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>dynamo.tablename.usageRecordTable</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>composer.baseUrl</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>crier.live.arn</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>crier.preview.arn</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>crier.preview.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>crier.live.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>app.name</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>security.cors.allowedOrigins</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td><code>metrics.request.enabled</code></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</tbody>
</table>
