<!-- TODO: think about moving this to a list, tables are a pain to style with
HTML in the cells e.g. `.job-edit-disabler` -->
<table class="jobs">
    <tbody>
        <tr ng:repeat="job in jobs">
            <td class="job-info job-info--thumbnail">
                <a ui:sref="image({imageId: job.image.data.id})"
                   ng:if="job.thumbnail">
                    <img ng:src="{{job.thumbnail | assetFile}}"
                         class="job-info--thumbnail__image" />
                </a>
            </td>
            <td class="job-info job-info--file">
                <div>
                    <span class="job-status {{'job-status--' + job.status}}">
                        {{job.status}}
                    </span>
                </div>
                <div ng:if="job.status == 'upload-error'">
                    {{job.error}}
                </div>
                <div class="job-file">
                    <div class="job-file__name">{{job.name}}</div>
                    <div class="job-file__size">{{job.size | asFileSize}}</div>
                </div>
            </td>
            <td class="job-info job-info--editor">
                <div ng:if="job.image">
                    <ui-required-metadata-editor disabled="job.busy"
                                                 id="job.image.data.id"
                                                 metadata="job.image.data.metadata"></ui-required-metadata-editor>

                    <div class="metadata-applicator" ng:if="jobs.length > 1">
                        Apply
                        <button class="metadata-applicator__button"
                                ng:click="uploadJobsCtrl.updateAllMetadata('byline', job.image.data.metadata.byline)">byline</button>
                        /
                        <button class="metadata-applicator__button"
                                ng:click="uploadJobsCtrl.updateAllMetadata('credit', job.image.data.metadata.credit)">credit</button>
                        to all
                    </div>

                    <div class="job-labels">
                        <ui-labeller class="job-labeller"
                                     labels="job.image.data.userMetadata.data.labels">
                        </ui-labeller>

                        <!-- TODO: find a more efficient way of of doing `jobsExcept` -->
                        <ui-edit-applicator class="job-apply-to-all"
                                            ng:if="job.image"
                                            give-this="uploadJobsCtrl.getLabelsArrFrom(job.image)"
                                            to-these="uploadJobsCtrl.getAllEditsOfType('labels', uploadJobsCtrl.jobsExcept(job))"
                                            and-then="uploadJobsCtrl.updateLabels(uploadJobsCtrl.jobsExcept(job))">
                        </ui-edit-applicator>
                    </div>
                </div>
            </td>
        </tr>
    </tbody>
</table>
