<form class="usage-rights-editor ure"
      ng:submit="usageRights.$valid && ctrl.save()"
      name="usageRights">
    <label class="ure__category">
        <select
            ng:model="ctrl.category"
            ng:disabled="ctrl.saving"
            ng:options="category as category.name for category in ctrl.categories track by category.value">
            <option value="">None</option>
        </select>
    </label>

    <div class="ure__cost"
         ng:switch="ctrl.getCost()">

        <div class="cost cost--free"
             ng:switch-when="free">Free to use</div>

        <div class="cost cost--conditional"
             ng:switch-when="conditional">Restricted use</div>

        <div class="cost cost--pay"
             ng:switch-default>Pay to use</div>
    </div>

    <div class="ure__description" ng:if="ctrl.category">
        {{ctrl.category.description}}
    </div>
    <div class="ure__description" ng:if="!ctrl.category">
        This image has no usage rights and will be set to pay to use.
    </div>


    <label class="ure__restrictions" ng:if="ctrl.category">

        <div class="form-label">
            <div class="form-label__text">Restrictions</div>
            <div class="form-label__error"
                 ng:if="usageRights.restrictions.$error.required">Required for {{ctrl.pluraliseCategory()}}.</div>
        </div>


        <textarea class="ure__restrictions-text"
                  msd-elastic
                  name="restrictions"
                  placeholder="{{ctrl.restrictionsPlaceholder()}}"
                  ng:required="ctrl.category.cost === 'conditional'"
                  ng:model="ctrl.restrictions"
                  ng:disabled="ctrl.isDisabled()"></textarea>
    </label>

    <div class="ure__submit">
        <button class="ure__submit-button button" type="submit"
            ng:class="{ 'button--green': ctrl.saved }"
            ng:disabled="ctrl.isDisabled() || !usageRights.$valid">
                <span ng:if="!(ctrl.saving || ctrl.saved)">Save</span>
                <span ng:if="ctrl.saving">Saving</span>
                <span ng:if="ctrl.saved">Saved</span>
        </button>

        <button
            class="ure__reset"
            type="button"
            ng:click="ctrl.delete()"
            title="Set the usage rights to what they were before any overrides were applied.">
            <i class="material-icons">delete</i> Remove
        </button>

        <div class="ure__error" ng:if="ctrl.error" ng:bind="ctrl.error"></div>
    </div>

</form>
