<!-- TODO: show only after a delay -->
<div ng:if="loading"
     class="image-loading-results">
    Fetching images…
</div>

<div ng:if="! loading">
    <div ng:show="images.length == 0"
         class="image-no-results">
        No matches, sorry!
    </div>

    <div ng:show="images.length > 0">

        <div class="image-results-count">
            {{totalResults | toLocaleString}} matches
            <button ng:show="newImagesCount > 0"
                    ng:click="revealNewImages()"
                    class="image-results-count__new">
                {{newImagesCount | toLocaleString}} new
            </button>
        </div>

        <ul class="results"
            ui:has-space="uiHasSpace"
            ui:near-bottom="fillRemainingSpace()"
            ui:forget-window-scroll="searched"
            ui:window-resized="fillRemainingSpace()">
            <li class="result"
                ng:repeat="image in images"
                ng:class="{ 'result--seen': imageHasBeenSeen(image) }">

                <ui-preview-image image="image">
                    <button class="mark-as-seen"
                            title="Mark all images until this point as seen"
                            ui:localstore="search.seenFrom"
                            ui:localstore-val="getLastSeenVal(image)">☑</button>
                </ui-preview-image>
            </li>
        </ul>
    </div>
</div>
