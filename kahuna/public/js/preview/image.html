<div class="preview"
     title="{{image.data.metadata.description || image.data.metadata.title}}">
    <a class="preview__popout"
        target="_blank"
        title="Pop out"
        ng:href="/images/{{image.data.id}}">◹</a>

    <a class="preview__link"
       ui:sref="image({imageId: image.data.id})"
       ui:drag-data="{{image | asImageDragData}}">
       <img class="preview__image"
            ng:src="{{image.data.thumbnail | assetFile}}" />
    </a>

    <div class="preview__info" ng:if="! hideInfo">
        <ui-labeller-compact class="preview__labeller"
                             labels="image.data.userMetadata.data.labels"
                             disable-delete="true"
                             hide-placeholder="true"
                             small-add-button="true"></ui-labeller>

        <p class="preview__description">{{image.data.metadata.description || image.data.metadata.title}}</p>
    </div>

    <div class="preview__bottom-bar bottom-bar">
        <div class="bottom-bar__meta">
            <span class="preview__upload-date">{{image.data.uploadTime | date:'d/M/yy'}}</span>
            <span class="preview__upload-time">{{image.data.uploadTime | date:'HH:mm'}}</span>

            <span class="bottom-bar__meta-item preview__has-crops"
                  title="this image has crops"
                  ng:if="image | hasExportsOfType:'crop'"><img class="ico" ng:src="{{'images/ico/crop.svg'| assetLocation}}" /></span>
        </div>
        <div class="bottom-bar__actions">
            <!-- transclusion point for extra actions -->
            <ng:transclude></ng:transclude>

            <a class="bottom-bar__action"
               title="crop"
               ng:if="image.data.valid"
               ui:sref="crop({ imageId: image.data.id })">✂</a>

            <ui-archiver class="bottom-bar__action"
                         archived="image.data.userMetadata.data.archived"></ui-archiver>

            <div class="bottom-bar__action">
                <div ng:if="image.data.cost == 'pay'"
                     class="cost cost--{{image.data.cost}}">
                    pay
                </div>
            </div>
        </div>
    </div>
</div>
