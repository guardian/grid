<!-- TODO: should really be a separate URL -->
<div ng:if="crops"
     ui:drag-data="{{crops | asCropsDragData}}">
    <!-- Add both image and crop drag data (using nesting) -->
    <!-- FIXME: pick most appropriate image, style page, drag help message, back link, etc -->
    <img ng:src="{{crops.sizings[0].file}}"
         ui:drag-data="{{image | asImageDragData}}" />
</div>
<div class="crop-image" ng:if="! crops">
    <div class="easel">
        <div class="easel__canvas">
            <img class="easel__image"
                 ng:src="{{image.data.secureUrl}}"
                 ui:crop-box="coords"
                 ui:crop-box-original-width="image.data.dimensions.width"
                 ui:crop-box-original-height="image.data.dimensions.height"
                 ui:crop-box-aspect="aspect"
                 ui:crop-box-background-opacity="0.3"
            />
        </div>

        <div class="palette">
            <label class="palette__button">
                <input type="radio" ng:model="aspect" value="{{landscapeRatio}}" />
                landscape
            </label>
            <label class="palette__button">
                <input type="radio" ng:model="aspect" value="{{portraitRatio}}" />
                portrait
            </label>
            <label class="palette__button">
                <input type="radio" ng:model="aspect" value="{{freeRatio}}" />
                free-form
            </label>
            <button class="button palette__button"
                    type="button"
                    ng:click="crop()"
                    ng:disabled="cropping">crop<span ng:show="cropping">pingâ€¦</span></button>

            <a class="palette__button palette__button--sly" ui:sref="image({ imageId: image.data.id })">cancel</a>
        </div>
    </div>
</div>
