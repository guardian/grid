@(mediaApiUri: String, mixpanelToken: Option[String])
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <!-- Added for: https://docs.angularjs.org/error/$location/nobase -->
    <base href="/" />

    <title ui:title ui:title-suffix="the grid">the grid</title>
    <link rel="media-api-uri" href="@mediaApiUri" />
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/main.css")" />
@mixpanelToken.map { token =>
    <meta name="mixpanel-token" content="@token" />
}

    <style>
        .ng-cloak { display: none }
    </style>

  </head>
  <body>
    <p class="loader" ng:hide="true">Loading the gridâ€¦</p>
    <!-- target prevents AngularJS from handling the navigation -->
    <div ui:view></div>

    <!-- FIXME: We should be able to let SystemJS load traceur-runtime
         if necessary, but there seems to be a bug.
         https://github.com/jspm/jspm-cli/issues/350
    -->
    <script src="@routes.Assets.at("jspm_packages/traceur-runtime.js")"></script>
    <script src="@routes.Assets.at("jspm_packages/system.js")"></script>
    <script src="@routes.Assets.at("config.js")"></script>
    <script>
      // FIXME: could this be written to config.js instead? annoying to have to override
      System.config({
          baseURL: "/assets"
      });

      System.import("js/main").catch(function(error) {
          setTimeout(function(){ throw error; });
      });
    </script>
  </body>
</html>
