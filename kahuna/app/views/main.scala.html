@(mediaApiUri: String, principal: com.gu.mediaservice.lib.auth.Principal)
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Kahuna</title>
    <link rel="media-api-uri" href="@mediaApiUri"/>
    <script src="@routes.Assets.at("jspm_packages/system@0.6.js")"></script>
    <script src="@routes.Assets.at("config.js")"></script>
    <script>
      // TODO: Setup package with main
      // TODO: submit this to jspm registry
      System.meta["github:angular/bower-angular-route@@1.2.23/angular-route"] = {
        "deps": ["angular"]
      };
      System.meta["github:tapmodo/Jcrop@@0.9.12/js/jquery.Jcrop"] = {
        "deps": ["jquery"]
      };

      // FIXME: could this be written to config.js instead? annoying to have to override
      System.config({
        baseURL: "/assets",
        paths: {
          "*":        "js/*.js",
          "npm:*":    "jspm_packages/npm/*.js",
          "github:*": "jspm_packages/github/*.js"
        }
      });

      System.import("app").catch(console.error.bind(console));
    </script>
    <style>
        .ng-cloak { display: none }
    </style>
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/main.css")"/>
  </head>
  <body>
    <p ng:hide="true">Authenticated as @{principal.name}. Loading Kahuna...</p>

    <div class="user-menu">
      <!-- target prevents AngularJS from handling the navigation -->
      <a href="/logout" target="_self">Logout</a>
    </div>

    <div ui:view></div>

  </body>
</html>
