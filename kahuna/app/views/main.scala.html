@(mediaApiUri: String, principal: com.gu.mediaservice.lib.auth.Principal)
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Kahuna</title>
    <link rel="media-api-uri" href="@mediaApiUri"/>
    <script src="@routes.Assets.at("jspm_packages/system@0.6.js")"></script>
    <script src="@routes.Assets.at("config.js")"></script>
    <script>
      // TODO: submit jcrop mapping/config to jspm registry
      // TODO: configure this in jspm overrides instead
      System.meta["jcrop/js/jquery.Jcrop"] = {
        "deps": ["jquery"]
      };

      // FIXME: could this be written to config.js instead? annoying to have to override
      System.config({
        baseURL: "/assets",
        paths: {
          "*":        "js/*.js",
          "npm:*":    "jspm_packages/npm/*.js",
          "github:*": "jspm_packages/github/*.js"
        }
      });

      System.import("app").catch(console.error.bind(console));
    </script>
    <style>
        .ng-cloak { display: none }
    </style>
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/main.css")"/>
  </head>
  <body>
    <p class="loader" ng:hide="true">Authenticated as @{principal.name}. Loading Kahunaâ€¦</p>
    <!-- target prevents AngularJS from handling the navigation -->
    <a class="logout" href="/logout" target="_self">Logout</a>

    <div ui:view></div>
  </body>
</html>
